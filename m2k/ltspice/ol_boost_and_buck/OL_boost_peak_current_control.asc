Version 4
SHEET 1 5968 3060
WIRE 624 1056 624 1008
WIRE 832 1056 832 1040
WIRE 448 1088 368 1088
WIRE 368 1168 368 1088
WIRE 624 1184 624 1136
WIRE 624 1184 512 1184
WIRE 512 1232 512 1184
WIRE 624 1232 624 1184
WIRE 176 1248 176 1232
WIRE 368 1296 368 1248
WIRE 176 1344 176 1328
WIRE 624 1376 624 1312
WIRE 3440 1616 3376 1616
WIRE 3472 1616 3440 1616
WIRE 3120 1632 3024 1632
WIRE 3152 1632 3120 1632
WIRE 3184 1632 3152 1632
WIRE 1952 1664 1872 1664
WIRE 2384 1664 2208 1664
WIRE 3120 1664 3120 1632
WIRE 3152 1664 3152 1632
WIRE 3184 1664 3184 1632
WIRE 3376 1664 3376 1616
WIRE 2720 1680 2672 1680
WIRE 2832 1680 2800 1680
WIRE 2464 1712 2464 1680
WIRE 2480 1712 2464 1712
WIRE 2672 1712 2672 1680
WIRE 1904 1728 1712 1728
WIRE 1952 1728 1904 1728
WIRE 2256 1728 2208 1728
WIRE 2480 1728 2336 1728
WIRE 2624 1728 2544 1728
WIRE 2464 1744 2464 1712
WIRE 2480 1744 2464 1744
WIRE 2432 1760 2432 1680
WIRE 2480 1760 2432 1760
WIRE 2560 1760 2544 1760
WIRE 2464 1776 2464 1744
WIRE 2480 1776 2464 1776
WIRE 2624 1776 2608 1776
WIRE 1712 1792 1712 1728
WIRE 1952 1792 1872 1792
WIRE 2240 1792 2208 1792
WIRE 2608 1792 2608 1776
WIRE 2496 1808 2496 1776
WIRE 2672 1824 2672 1792
WIRE 2816 1824 2672 1824
WIRE 1952 1856 1920 1856
WIRE 2272 1856 2208 1856
WIRE 2288 1856 2272 1856
WIRE 2384 1856 2384 1664
WIRE 2384 1856 2368 1856
WIRE 1920 1920 1920 1856
WIRE 2240 1920 2240 1792
WIRE 2240 1920 1920 1920
WIRE 3376 1936 3376 1920
WIRE 1920 1952 1920 1920
WIRE 3120 1952 3120 1920
WIRE 3120 1952 2912 1952
WIRE 3152 1952 3152 1920
WIRE 3152 1952 3120 1952
WIRE 3184 1952 3184 1920
WIRE 3184 1952 3152 1952
WIRE 2272 1968 2272 1856
WIRE 2480 1968 2272 1968
WIRE 2672 1968 2480 1968
WIRE 1872 2064 1792 2064
WIRE 2912 2064 2912 1952
WIRE 2928 2064 2912 2064
WIRE 3024 2064 3024 1632
WIRE 3024 2064 3008 2064
WIRE 3184 2064 3024 2064
WIRE 3360 2064 3264 2064
WIRE 3504 2064 3440 2064
WIRE 3536 2064 3504 2064
WIRE 3680 2064 3600 2064
WIRE 3728 2064 3680 2064
WIRE 3792 2064 3728 2064
WIRE 3680 2080 3680 2064
WIRE 3792 2080 3792 2064
WIRE 2672 2096 2672 1968
WIRE 3504 2128 3504 2064
WIRE 2576 2144 2560 2144
WIRE 2608 2144 2576 2144
WIRE 2912 2144 2912 2064
WIRE 2512 2160 2512 2080
WIRE 2528 2160 2512 2160
WIRE 1872 2176 1872 2144
WIRE 1984 2176 1872 2176
WIRE 2240 2176 2208 2176
WIRE 2336 2176 2240 2176
WIRE 2528 2176 2336 2176
WIRE 2608 2176 2608 2144
WIRE 2608 2176 2592 2176
WIRE 2624 2176 2608 2176
WIRE 3680 2176 3680 2144
WIRE 3792 2176 3792 2160
WIRE 2512 2192 2512 2160
WIRE 2528 2192 2512 2192
WIRE 3504 2192 3504 2128
WIRE 1872 2208 1872 2176
WIRE 2336 2208 2336 2176
WIRE 2368 2208 2336 2208
WIRE 2448 2208 2432 2208
WIRE 2528 2208 2448 2208
WIRE 2608 2208 2592 2208
WIRE 2512 2224 2512 2192
WIRE 2528 2224 2512 2224
WIRE 2672 2224 2672 2192
WIRE 2912 2224 2912 2144
WIRE 2448 2240 2448 2208
WIRE 1984 2256 1968 2256
WIRE 2256 2256 2208 2256
WIRE 2304 2256 2256 2256
WIRE 2544 2256 2544 2224
WIRE 2256 2272 2256 2256
WIRE 3456 2272 3328 2272
WIRE 2912 2320 2912 2304
WIRE 3504 2320 3504 2288
WIRE 3504 2320 3328 2320
WIRE 1984 2336 1920 2336
WIRE 2224 2336 2208 2336
WIRE 2448 2336 2448 2320
WIRE 1920 2352 1920 2336
WIRE 3504 2352 3504 2320
WIRE 2224 2368 2224 2336
WIRE 2256 2368 2256 2352
WIRE 2256 2368 2224 2368
WIRE 2256 2384 2256 2368
WIRE 1920 2448 1920 2432
WIRE 3504 2448 3504 2432
WIRE 2256 2480 2256 2464
FLAG 3728 2064 OUT
FLAG 3680 2176 0
FLAG 3792 2176 0
FLAG 368 1296 0
FLAG 2912 2320 0
FLAG 3504 2448 0
FLAG 512 1232 0
FLAG 3376 1936 0
FLAG 624 1376 Vm
FLAG 624 1008 Vp
FLAG 3296 1664 Vp
FLAG 3296 1920 Vm
FLAG 3440 1616 Ihigh
FLAG 3504 2128 bswitch
FLAG 1920 1952 0
FLAG 2672 2224 0
FLAG 1872 1792 Ihigh
FLAG 2544 2256 0
FLAG 2512 2080 Vcc
FLAG 2448 2336 0
FLAG 1872 1664 Vcc
FLAG 3328 2272 bgate
FLAG 2816 1824 bsource
FLAG 2832 1680 bgate
FLAG 3328 2320 bsource
FLAG 832 1136 0
FLAG 832 1040 Vcc
FLAG 2608 1792 0
FLAG 2912 2144 IN
FLAG 1968 2256 0
FLAG 1920 2448 0
FLAG 2256 2480 0
FLAG 2240 2176 clk
FLAG 176 1344 0
FLAG 176 1232 V1.24
FLAG 1872 2288 0
FLAG 1792 2064 V1.24
FLAG 1904 1728 Ith
FLAG 1712 1872 0
FLAG 1872 2176 ManualDuty
FLAG 2496 1808 0
FLAG 2464 1680 Vcc
FLAG 2304 2256 Vcc
FLAG 2432 1680 Vcc
FLAG 2480 1968 set
FLAG 2576 2144 set_gate
SYMBOL ind 3168 2080 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 130µ
SYMBOL schottky 3536 2080 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MBRS340
SYMBOL polcap 3664 2080 R0
SYMATTR InstName C1
SYMATTR Value 47µF
SYMATTR SpiceLine Rser=15m
SYMBOL VOLTAGE 2912 2208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 3776 2064 R0
SYMATTR InstName Rload
SYMATTR Value 100
SYMBOL res 3488 2336 R0
SYMATTR InstName R4
SYMATTR Value 1m
SYMBOL VOLTAGE 368 1152 R0
WINDOW 3 -190 -68 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(.25 .1 50)
SYMATTR InstName V3
SYMBOL res 3024 2048 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL Opamps\\LT1995 3296 1792 R0
SYMATTR InstName U3
SYMBOL VOLTAGE 624 1216 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 2.5
SYMBOL VOLTAGE 624 1040 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL nmos 3456 2192 R0
SYMATTR InstName M1
SYMATTR Value Si4896DY
SYMBOL res 2352 1712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL Comparators\\LT1671 2080 1760 R0
SYMATTR InstName U4
SYMBOL res 2272 1840 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 2k
SYMBOL nmos 2624 2096 R0
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL Digital\\and 2560 2128 R0
WINDOW 0 -21 61 Left 2
SYMATTR InstName A1
SYMATTR Value2 Vhigh=5 Ref=2.5 td=5ns
SYMBOL res 2432 2224 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL cap 2432 2192 R90
WINDOW 0 82 44 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 220p
SYMBOL voltage 832 1040 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 5
SYMBOL res 2816 1664 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10
SYMBOL res 2240 2256 R0
SYMATTR InstName R24
SYMATTR Value 976k
SYMBOL res 2240 2368 R0
SYMATTR InstName R25
SYMATTR Value 182k
SYMBOL res 1904 2336 R0
SYMATTR InstName R26
SYMATTR Value 62.6k
SYMBOL voltage 176 1232 R0
SYMATTR InstName V2
SYMATTR Value 1.24
SYMBOL res 1856 2048 R0
SYMATTR InstName R17
SYMATTR Value 14.9k
SYMBOL res 1856 2192 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL voltage 1712 1776 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -61 144 Left 2
SYMATTR Value SINE(0.5 0.25 2000)
SYMATTR InstName V6
SYMBOL Digital\\and 2512 1680 R0
SYMATTR InstName A2
SYMATTR Value2 Vhigh=5 Ref=2.5 td=5ns
SYMBOL SpecialFunctions\\LTC6992-3 2096 2256 R0
SYMATTR InstName U6
SYMBOL e 2672 1696 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res 3456 2048 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_L1esr
SYMATTR Value {0.344*3}
TEXT 728 856 Left 2 !.tran 0 10m 0 10n startup
TEXT 736 904 Left 2 !.model my_sw sw(Vt= 0.5 Vh=-.25 Ron=0.01 Roff=100Meg)
TEXT 3128 2384 Left 2 ;Usual location for boost sense\nresistor, but since we've got a \nhigh-side sense amplifier, we\nmight as well use it.
TEXT 3440 1712 Left 2 ;"Poor engineer's current probe"
TEXT 2504 2344 Left 2 ;Positive edge detector - \nSet pulse needs to be a sliver\n(Probe rst_gate signal)
TEXT 728 1248 Left 2 ;TGate pulled high\nin boost mode
TEXT 2016 1600 Left 2 ;Comparator
TEXT 2728 1760 Left 2 ;Gate Driver
TEXT 264 1016 Left 2 ;Sine stimulus for\nAC analysis
TEXT 136 1432 Left 2 ;Voltage sources
TEXT 3440 1760 Left 2 ;Gain of 7 \n(0.7V =1A)
TEXT 1144 976 Left 2 ;.step param R 12.5 100 20
TEXT -56 704 Left 6 ;BOOST - Open-Loop, peak current control
TEXT 2016 2064 Left 2 ;fout = (1MHz * 50k) / (N * Rset)\nRset = (1MHz * 50k) / (N * fout)
TEXT 2024 2400 Left 2 ;Master Clock
TEXT 2016 2032 Left 2 ;duty = Vmod-0.1/0.8
TEXT 1728 2024 Left 2 ;Potentiometer
TEXT 2560 1856 Left 2 ;Behavioral Equivalent of LTC7001\n(Aids Simulaiton Convergence)
TEXT 2352 1576 Left 2 ;(Pass-through in peak\ncurrent control mode)
RECTANGLE Normal 1104 1456 80 960 2
