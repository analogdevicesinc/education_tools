Version 4
SHEET 1 2776 1156
WIRE 80 -480 -32 -480
WIRE -32 -464 -32 -480
WIRE 80 -448 80 -480
WIRE 160 -432 128 -432
WIRE 144 -384 128 -384
WIRE -32 -368 -32 -384
WIRE 144 -368 144 -384
WIRE -112 -320 -176 -320
WIRE 80 -320 80 -368
WIRE 80 -320 -16 -320
WIRE 160 -320 80 -320
WIRE 240 -320 160 -320
WIRE 384 -320 320 -320
WIRE 496 -320 464 -320
WIRE 608 -320 576 -320
WIRE 720 -320 688 -320
WIRE 816 -320 720 -320
WIRE 912 -320 816 -320
WIRE 1024 -320 912 -320
WIRE 1296 -320 1024 -320
WIRE 1328 -320 1296 -320
WIRE -176 -304 -176 -320
WIRE 160 -272 160 -320
WIRE 720 -272 720 -320
WIRE 816 -272 816 -320
WIRE 912 -272 912 -320
WIRE 1024 -272 1024 -320
WIRE 1088 -272 1024 -272
WIRE 1248 -272 1168 -272
WIRE 1024 -208 1024 -272
WIRE 1088 -208 1024 -208
WIRE 1248 -208 1248 -272
WIRE 1248 -208 1168 -208
WIRE 720 -192 720 -208
WIRE 816 -192 816 -208
WIRE 912 -192 912 -208
WIRE -176 -176 -176 -224
WIRE 160 -176 160 -208
WIRE 160 -176 -176 -176
WIRE 160 -144 160 -176
WIRE 1024 -144 1024 -208
WIRE 1088 -144 1024 -144
WIRE 1248 -144 1248 -208
WIRE 1248 -144 1168 -144
WIRE 1248 -112 1248 -144
WIRE 1296 -112 1248 -112
WIRE 720 -96 720 -112
WIRE 816 -96 816 -112
WIRE 816 -96 720 -96
WIRE 912 -96 912 -112
WIRE 912 -96 816 -96
WIRE 1024 -80 1024 -144
WIRE 1088 -80 1024 -80
WIRE 1248 -80 1248 -112
WIRE 1248 -80 1168 -80
WIRE 1296 -80 1296 -112
WIRE 720 -64 720 -96
WIRE 112 -32 32 -32
WIRE 176 -32 112 -32
WIRE 496 -32 400 -32
WIRE 1024 -16 1024 -80
WIRE 1088 -16 1024 -16
WIRE 1248 -16 1248 -80
WIRE 1248 -16 1168 -16
WIRE 32 32 32 -32
WIRE 176 48 160 48
WIRE 448 48 400 48
WIRE 608 48 448 48
WIRE 1024 48 1024 -16
WIRE 1088 48 1024 48
WIRE 1248 48 1248 -16
WIRE 1248 48 1168 48
WIRE 448 64 448 48
WIRE 176 128 112 128
WIRE 416 128 400 128
WIRE 112 144 112 128
WIRE 32 160 32 112
WIRE 416 160 416 128
WIRE 448 160 448 144
WIRE 448 160 416 160
WIRE 608 160 608 48
WIRE 448 176 448 160
WIRE 112 256 112 224
WIRE 608 256 608 240
WIRE 448 272 448 256
FLAG 160 -144 0
FLAG 608 256 0
FLAG 160 48 0
FLAG 112 256 0
FLAG 448 272 0
FLAG 496 -32 clk
FLAG 32 160 0
FLAG 144 -368 0
FLAG 160 -432 clk
FLAG 112 -32 b
FLAG 1296 -320 a
FLAG 720 -64 0
FLAG 1296 -80 0
SYMBOL schottky 176 -208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value MBRS360
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos -112 -368 M90
SYMATTR InstName M2
SYMATTR Value Si4896DY
SYMBOL voltage 32 16 R0
WINDOW 123 49 80 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -38 -1 Left 2
WINDOW 3 -27 -41 Right 2
SYMATTR InstName V3
SYMATTR Value SINE(.5 0.05 {freq})
SYMBOL res 432 48 R0
SYMATTR InstName R1
SYMATTR Value 976k
SYMBOL res 432 160 R0
SYMATTR InstName R2
SYMATTR Value 182k
SYMBOL res 96 128 R0
SYMATTR InstName R3
SYMATTR Value 156k
SYMBOL voltage 608 144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL e 80 -464 M0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res -48 -480 R0
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL voltage -176 -320 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL SpecialFunctions\\LTC6992-1 288 48 R0
SYMATTR InstName U1
SYMBOL res 1072 -192 R270
WINDOW 0 23 -6 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL1
SYMATTR Value 25
SYMBOL ind 368 -304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 131µH
SYMATTR SpiceLine Cpar=500pF
SYMBOL cap 800 -272 R0
SYMATTR InstName C1
SYMATTR Value 47µF
SYMBOL polcap 704 -272 R0
SYMATTR InstName C2
SYMATTR Value 4.7µF
SYMBOL res 592 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_ESR
SYMATTR Value 0.95
SYMBOL res 1072 -128 R270
WINDOW 0 19 -10 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL2
SYMATTR Value 50
SYMBOL res 704 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RS_LO
SYMATTR Value 0.1
SYMBOL polcap 896 -272 R0
SYMATTR InstName C3
SYMATTR Value 470µF
SYMBOL res 704 -208 R0
SYMATTR InstName R6
SYMATTR Value 3.39
SYMBOL res 800 -208 R0
SYMATTR InstName R7
SYMATTR Value 0.339
SYMBOL res 896 -208 R0
SYMATTR InstName R8
SYMATTR Value 0.0339
SYMBOL res 1072 -64 R270
WINDOW 0 20 -9 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL3
SYMATTR Value 100
SYMBOL res 1072 0 R270
WINDOW 0 20 -8 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL4
SYMATTR Value 200
SYMBOL res 1072 -256 R270
WINDOW 0 20 -2 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL5
SYMATTR Value 12.5
SYMBOL res 1072 64 R270
WINDOW 0 20 -8 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RL6
SYMATTR Value 200
SYMBOL res 336 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RS_HI
SYMATTR Value 0.1
TEXT -32 296 Left 2 ;Rset = (1MHz * 50k) / (N * fout)
TEXT 704 776 Left 2 !.tran 0 {t0+10/freq} {t0}\n \n.meas Aavg avg V(a)\n.meas Bavg avg V(b)\n.meas Are avg (V(a)-Aavg)*cos(360*time*Freq)\n.meas Aim avg -(V(a)-Aavg)*sin(360*time*Freq)\n.meas Bre avg (V(b)-Bavg)*cos(360*time*Freq)\n.meas Bim avg -(V(b)-Bavg)*sin(360*time*Freq)\n.meas GainMag param 20*log10(hypot(Are,Aim)/hypot(Bre,Bim))\n.meas GainPhi param mod(atan2(Aim,Are)-atan2(Bim,Bre)+180,360)-180\n \n.step dec param freq 5 50k 5\n.save V(a) V(b)\n.option plotwinsize=0 numdgt=15
TEXT 696 696 Left 2 !.param t0=0.01
TEXT 744 -368 Left 2 ;Output Capacitors
TEXT 1088 -360 Left 2 ;Load
TEXT 1112 768 Left 2 ;.tran .01\n.param freq=0.0
TEXT 472 296 Left 2 ;N=16
